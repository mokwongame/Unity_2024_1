using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using TMPro;

public class GameManager : MonoBehaviour
{
    public AudioClip clipShot;
    public AudioClip clipStartGameVoice;
    public TMP_Text textScore;
    bool bCanMakeBall = true; // 공을 만들 수 있는 상태
    int score = 0; // 득점
    //AudioSource audioSource;
    public AudioSource audioSource;

    // Start is called before the first frame update
    void Start()
    {
        //audioSource = FindAnyObjectByType<AudioSource>(); // GameManager의 AudioSource를 재활용
    }

    // Update is called once per frame
    void Update()
    {

    }

    // 공 만들 수 있는지 확인
    public bool canMakeBall() { return bCanMakeBall; }

    public void setMakeBall(bool bCanMake) // 공 만들기 상태 변경
    {
        bCanMakeBall = bCanMake;
    }

    public int getScore() { return score; }
    public void setScore(int newScore) { score = newScore; }
    public void incScore() // 1점을 증가
    {
        score++;
        showScore();
    }
    public void incBestScore() // 10점을 증가
    {
        score += 10;
        showScore();
    }

    public int getColorSize() { return 8; }

    public Color getColor(int colorIndex)
    {
        // switch 구문은 if, else 구문을 간소화시킴
        switch (colorIndex)
        {
            case 0: return Color.red; // if (colorIndex == 0) {...}
            case 1: return Color.green;
            case 2: return Color.blue;
            case 3: return Color.magenta;
            case 4: return Color.yellow;
            case 5: return Color.cyan;
            case 6: return Color.white;
            case 7: return Color.black;
            default: return Color.black;
        }
    }

    public Color getRandomColor()
    {
        //int colorIndex = Random.Range(0, 8); // 0, 1, 2,..., 7(8-1) 범위의 난수 생성
        int colorIndex = Random.Range(0, getColorSize());
        return getColor(colorIndex);
    }

    public void showScore()
    {
        textScore.text = score.ToString(); // ToString(): int를 string으로 변경
    }

    public void playBallShot()
    {
        audioSource.PlayOneShot(clipShot, 1.0f); // clipShot: MP3 파일이 연결될 AudioClip; 1.0f: 소리를 100%로 연주
    }

    public void playStartGameVoice()
    {
        audioSource.PlayOneShot(clipStartGameVoice, 1.0f);
    }
}
